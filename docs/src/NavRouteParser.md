# NavRouteParser.py

## Purpose
Parses the NavRoute.json file generated by Elite Dangerous to monitor and retrieve the player's current navigation route destination.

## Key Classes/Functions
- **NavRouteParser**: Main class for reading and monitoring the NavRoute.json file

## Key Methods
- **get_nav_route_data()**: Loads NavRoute.json with file change detection and error handling. Returns dict with timestamp, event, and Route array, or None if file missing.
- **get_last_system()**: Returns the final destination system name from the route, or empty string if no route active.
- **get_file_modified_time()**: Gets the file's last modification timestamp

## Key Attributes
- **file_path**: Location of NavRoute.json (auto-detected by OS)
- **current_data**: Cached JSON data from last successful read
- **last_mod_time**: Timestamp of last file read to detect changes

## File Location
- **Windows**: Saved Games/Frontier Developments/Elite Dangerous/NavRoute.json (via WindowsKnownPaths)
- **Linux**: ./linux_ed/NavRoute.json

## NavRoute.json Format
```
{
  "timestamp": "2024-09-29T20:02:20Z",
  "event": "NavRoute" | "NavRouteClear",
  "Route": [
    {"StarSystem": "SystemName", "SystemAddress": 12345,
     "StarPos": [x, y, z], "StarClass": "K"},
    ...
  ]
}
```

## Dependencies
- json: File parsing
- os: File system operations
- WindowsKnownPaths: Windows path resolution (Windows only)
- EDlogger: Logging

## Notes
- Event is "NavRouteClear" when route is empty
- File read includes exponential backoff retry on lock conflicts
- Returns empty string if file missing or route cleared
- Caches data and only re-reads if file modification time changes
- Supports custom file paths for testing
